<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>System design: URL · Invest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="URLs are important for web applications. When they are displayed they provide a visual cue to the user as to their location."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="System design: URL · Invest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://commitd.github.com/invest/index.html"/><meta property="og:description" content="URLs are important for web applications. When they are displayed they provide a visual cue to the user as to their location."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Invest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/about.html" target="_self">About</a></li><li class=""><a href="/docs/dev.reading-list.html" target="_self">Development</a></li><li class="siteNavGroupActive"><a href="/docs/ui.index.html" target="_self">UI</a></li><li class=""><a href="/docs/server.index.html" target="_self">Server</a></li><li class=""><a href="https://github.com/commitd/invest-server" target="_self">Server Source</a></li><li class=""><a href="https://github.com/commitd/invest-ui" target="_self">UI Source</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Design</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ui.index.html">Invest UI</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.faq.html">FAQ</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Concepts</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ui.ux.html">User interface and experience</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.technologies.html">Invest UI Technologies</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.modules.html">Invest UI Modules</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Design</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ui.system-comms.html">System design: Communications</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.system-outer.html">System design: Outer frame</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.system-plugin.html">System design: Plugin frame</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/ui.system-url.html">System design: URL</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Developing UIs</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ui.dev-ui-extension.html">Developing UI modules</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.dev-app-module.html">Advanced: Developing a new main application frontend</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.dev-core-module.html">Advanced: Developing a core module</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Support</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ui.live-development-plugin.html">Live development plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/ui.action-development-plugin.html">Action development plugin</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">System design: URL</h1></header><article><div><span><p>URLs are important for web applications. When they are displayed they provide a visual cue to the user as to their location.</p>
<p>Even if they are not displayed they serve a role as bookmarks, sharing links to content, and to enable refresh in the browser. In these cases the user has an expectation that when the page loads (from bookmark, refresh or linking a shared link) it will display the same information as when the link was originally bookmarked.</p>
<p>The definition of what consistutes the same information here is somewhat complex:</p>
<ul>
<li>If we are reading a specific article we would expect it to show the same article, but should it retain the same position on the page (e.g. how far the user has scrolled)?</li>
<li>If the user is half way through completing a form online, we would expect the same form to be displayed, but should partially complete information be displayed too?</li>
</ul>
<p>Within Invest we use the Intent system to define page links. That is the URL encodes the plugin being displayed, the action and payload it was opened with. This leaves it open to the plugin developer as to the level of granularity they should save on the URL.</p>
<p>Ignoring authentication flows, when the user refreshes or opens a link, the Invest framework behaves in the same manner as it would if it has navigated to that page via an click from another plugin.</p>
<h2><a class="anchor" aria-hidden="true" id="history"></a><a href="#history" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>History</h2>
<p>Management of location within the browser, i.e. the URL, is handled by the History API. There are many implementations of this available in React Router, though the History package.</p>
<p>The 'neatest' solution is the Browser History which provides clean urls, e.g. <a href="http://server/view/plugins1">http://server/view/plugins1</a>. However, we are using the Hash History, <a href="http://server/#/view/plugins1">http://server/#/view/plugins1</a>. Browser History requires some setup on the server-side which adds complexity for proxying and other options. Therefore we use Hash History which functions without any deployment configuration.</p>
<h2><a class="anchor" aria-hidden="true" id="recommendations"></a><a href="#recommendations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recommendations</h2>
<p>We recommend that a coarse granularity is retained on the URL. For example, for a plugin that allows customer information to be edited then record the customer id, but not any of the edits made. In the case of a document search, record the search query and perhaps the page of results being displayed, but not the scroll position in the browser.</p>
<p>The reason for this is simply that the notion of intent has a clear business/user meaning, whereas some of the other details are very implementation specific and it is not clear the user wanted that behaviour. From a developer perspective accessing and resetting aspects like scroll offset are very complex - not least of which because the screen size of one user may be different to the screen size of the user who is shared the link. Furthermore, it would be uncommon for a web application to perform such low level behaviours from the URL and therefore not likely to be expected by the user.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/ui.system-plugin.html">← System design: Plugin frame</a><a class="docs-next button" href="/docs/ui.dev-ui-extension.html">Developing UI modules →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Sitemap</h5><a href="/docs/about.html">About</a><a href="/docs/server.index.html">Server</a><a href="/docs/ui.index.html">UI</a></div><div><h5>Resources</h5><a href="https://github.com/commitd/invest">Source</a></div></section><section class="copyright">Copyright © 2018 Committed</section></footer></div></body></html>